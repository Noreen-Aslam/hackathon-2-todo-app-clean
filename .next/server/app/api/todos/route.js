"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/todos/route";
exports.ids = ["app/api/todos/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftodos%2Froute&page=%2Fapi%2Ftodos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftodos%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftodos%2Froute&page=%2Fapi%2Ftodos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftodos%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_pc_pookie_todo_app_app_api_todos_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/todos/route.ts */ \"(rsc)/./app/api/todos/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/todos/route\",\n        pathname: \"/api/todos\",\n        filename: \"route\",\n        bundlePath: \"app/api/todos/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\pc\\\\pookie-todo-app\\\\app\\\\api\\\\todos\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_pc_pookie_todo_app_app_api_todos_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/todos/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0b2RvcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdG9kb3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0b2RvcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNwYyU1Q3Bvb2tpZS10b2RvLWFwcCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDcGMlNUNwb29raWUtdG9kby1hcHAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNTO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9va2llLXRvZG8vP2I4OGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxccGNcXFxccG9va2llLXRvZG8tYXBwXFxcXGFwcFxcXFxhcGlcXFxcdG9kb3NcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90b2Rvcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RvZG9zXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90b2Rvcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHBjXFxcXHBvb2tpZS10b2RvLWFwcFxcXFxhcHBcXFxcYXBpXFxcXHRvZG9zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90b2Rvcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftodos%2Froute&page=%2Fapi%2Ftodos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftodos%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/todos/route.ts":
/*!********************************!*\
  !*** ./app/api/todos/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n\nasync function GET() {\n    try {\n        const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getSession)();\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const tasks = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.getTasks)(session.userId);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            tasks\n        });\n    } catch (error) {\n        console.error(\"Get tasks error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getSession)();\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        const { description, priority, tags, due_date } = body;\n        if (!description) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Description is required\"\n            }, {\n                status: 400\n            });\n        }\n        const task = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.addTask)(session.userId, {\n            description,\n            completed: false,\n            createdAt: new Date(),\n            priority: priority || \"normal\",\n            tags: tags || [],\n            dueDate: due_date ? new Date(due_date) : null\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            task\n        });\n    } catch (error) {\n        console.error(\"Create task error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RvZG9zL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXVEO0FBQ2hCO0FBQ0s7QUFFckMsZUFBZUk7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTUoscURBQVVBO1FBRWhDLElBQUksQ0FBQ0ksU0FBUztZQUNaLE9BQU9MLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWUsR0FDeEI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1DLFFBQVEsTUFBTVAsaURBQVFBLENBQUNHLFFBQVFLLE1BQU07UUFDM0MsT0FBT1YscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUFFRztRQUFNO0lBQ25DLEVBQUUsT0FBT0YsT0FBTztRQUNkSSxRQUFRSixLQUFLLENBQUMsb0JBQW9CQTtRQUNsQyxPQUFPUCxxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQXdCLEdBQ2pDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRU8sZUFBZUksS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU1SLFVBQVUsTUFBTUoscURBQVVBO1FBRWhDLElBQUksQ0FBQ0ksU0FBUztZQUNaLE9BQU9MLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWUsR0FDeEI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1NLE9BQU8sTUFBTUQsUUFBUVAsSUFBSTtRQUMvQixNQUFNLEVBQUVTLFdBQVcsRUFBRUMsUUFBUSxFQUFFQyxJQUFJLEVBQUVDLFFBQVEsRUFBRSxHQUFHSjtRQUVsRCxJQUFJLENBQUNDLGFBQWE7WUFDaEIsT0FBT2YscURBQVlBLENBQUNNLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBMEIsR0FDbkM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1XLE9BQU8sTUFBTWhCLGdEQUFPQSxDQUFDRSxRQUFRSyxNQUFNLEVBQUU7WUFDekNLO1lBQ0FLLFdBQVc7WUFDWEMsV0FBVyxJQUFJQztZQUNmTixVQUFVQSxZQUFZO1lBQ3RCQyxNQUFNQSxRQUFRLEVBQUU7WUFDaEJNLFNBQVNMLFdBQVcsSUFBSUksS0FBS0osWUFBWTtRQUMzQztRQUVBLE9BQU9sQixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1lBQUVhO1FBQUs7SUFDbEMsRUFBRSxPQUFPWixPQUFPO1FBQ2RJLFFBQVFKLEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDLE9BQU9QLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb29raWUtdG9kby8uL2FwcC9hcGkvdG9kb3Mvcm91dGUudHM/MTVkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICdAL2xpYi9hdXRoJ1xyXG5pbXBvcnQgeyBnZXRUYXNrcywgYWRkVGFzayB9IGZyb20gJ0AvbGliL2RiJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpOiBQcm9taXNlPFJlc3BvbnNlPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKClcclxuXHJcbiAgICBpZiAoIXNlc3Npb24pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0YXNrcyA9IGF3YWl0IGdldFRhc2tzKHNlc3Npb24udXNlcklkKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdGFza3MgfSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignR2V0IHRhc2tzIGVycm9yOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxSZXNwb25zZT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbigpXHJcblxyXG4gICAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCB7IGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgdGFncywgZHVlX2RhdGUgfSA9IGJvZHlcclxuXHJcbiAgICBpZiAoIWRlc2NyaXB0aW9uKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnRGVzY3JpcHRpb24gaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0YXNrID0gYXdhaXQgYWRkVGFzayhzZXNzaW9uLnVzZXJJZCwge1xyXG4gICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgY29tcGxldGVkOiBmYWxzZSxcclxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICBwcmlvcml0eTogcHJpb3JpdHkgfHwgJ25vcm1hbCcsXHJcbiAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXHJcbiAgICAgIGR1ZURhdGU6IGR1ZV9kYXRlID8gbmV3IERhdGUoZHVlX2RhdGUpIDogbnVsbCxcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdGFzayB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdDcmVhdGUgdGFzayBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXNzaW9uIiwiZ2V0VGFza3MiLCJhZGRUYXNrIiwiR0VUIiwic2Vzc2lvbiIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInRhc2tzIiwidXNlcklkIiwiY29uc29sZSIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImRlc2NyaXB0aW9uIiwicHJpb3JpdHkiLCJ0YWdzIiwiZHVlX2RhdGUiLCJ0YXNrIiwiY29tcGxldGVkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImR1ZURhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/todos/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAuthCookie: () => (/* binding */ clearAuthCookie),\n/* harmony export */   createToken: () => (/* binding */ createToken),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/verify.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nconst secret = new TextEncoder().encode(process.env.JWT_SECRET || \"default-secret-change-me\");\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 10);\n}\nasync function verifyPassword(password, hash) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(password, hash);\n}\nasync function createToken(userId) {\n    return new jose__WEBPACK_IMPORTED_MODULE_2__.SignJWT({\n        userId\n    }).setProtectedHeader({\n        alg: \"HS256\"\n    }).setExpirationTime(\"7d\").sign(secret);\n}\nasync function verifyToken(token) {\n    try {\n        const verified = await (0,jose__WEBPACK_IMPORTED_MODULE_3__.jwtVerify)(token, secret);\n        return verified.payload;\n    } catch  {\n        return null;\n    }\n}\nasync function getSession() {\n    const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const token = cookieStore.get(\"token\")?.value;\n    if (!token) return null;\n    return verifyToken(token);\n}\nfunction setAuthCookie(token) {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().set(\"token\", token, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        maxAge: 60 * 60 * 24 * 7,\n        path: \"/\"\n    });\n}\nfunction clearAuthCookie() {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().delete(\"token\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFDSDtBQUNUO0FBRTdCLE1BQU1JLFNBQVMsSUFBSUMsY0FBY0MsTUFBTSxDQUNyQ0MsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLElBQUk7QUFHckIsZUFBZUMsYUFBYUMsUUFBZ0I7SUFDakQsT0FBT1Isb0RBQVcsQ0FBQ1EsVUFBVTtBQUMvQjtBQUVPLGVBQWVFLGVBQWVGLFFBQWdCLEVBQUVDLElBQVk7SUFDakUsT0FBT1QsdURBQWMsQ0FBQ1EsVUFBVUM7QUFDbEM7QUFFTyxlQUFlRyxZQUFZQyxNQUFjO0lBQzlDLE9BQU8sSUFBSWhCLHlDQUFPQSxDQUFDO1FBQUVnQjtJQUFPLEdBQ3pCQyxrQkFBa0IsQ0FBQztRQUFFQyxLQUFLO0lBQVEsR0FDbENDLGlCQUFpQixDQUFDLE1BQ2xCQyxJQUFJLENBQUNoQjtBQUNWO0FBRU8sZUFBZWlCLFlBQVlDLEtBQWE7SUFDN0MsSUFBSTtRQUNGLE1BQU1DLFdBQVcsTUFBTXRCLCtDQUFTQSxDQUFDcUIsT0FBT2xCO1FBQ3hDLE9BQU9tQixTQUFTQyxPQUFPO0lBQ3pCLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRU8sZUFBZUM7SUFDcEIsTUFBTUMsY0FBY3hCLHFEQUFPQTtJQUMzQixNQUFNb0IsUUFBUUksWUFBWUMsR0FBRyxDQUFDLFVBQVVDO0lBRXhDLElBQUksQ0FBQ04sT0FBTyxPQUFPO0lBRW5CLE9BQU9ELFlBQVlDO0FBQ3JCO0FBRU8sU0FBU08sY0FBY1AsS0FBYTtJQUN6Q3BCLHFEQUFPQSxHQUFHNEIsR0FBRyxDQUFDLFNBQVNSLE9BQU87UUFDNUJTLFVBQVU7UUFDVkMsUUFBUXpCLGtCQUF5QjtRQUNqQzBCLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztRQUN2QkMsTUFBTTtJQUNSO0FBQ0Y7QUFFTyxTQUFTQztJQUNkbEMscURBQU9BLEdBQUdtQyxNQUFNLENBQUM7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb29raWUtdG9kby8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2lnbkpXVCwgand0VmVyaWZ5IH0gZnJvbSAnam9zZSdcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcclxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcydcclxuXHJcbmNvbnN0IHNlY3JldCA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShcclxuICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8ICdkZWZhdWx0LXNlY3JldC1jaGFuZ2UtbWUnXHJcbilcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgcmV0dXJuIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2g6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRva2VuKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICByZXR1cm4gbmV3IFNpZ25KV1QoeyB1c2VySWQgfSlcclxuICAgIC5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6ICdIUzI1NicgfSlcclxuICAgIC5zZXRFeHBpcmF0aW9uVGltZSgnN2QnKVxyXG4gICAgLnNpZ24oc2VjcmV0KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IFByb21pc2U8eyB1c2VySWQ6IHN0cmluZyB9IHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB2ZXJpZmllZCA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgc2VjcmV0KVxyXG4gICAgcmV0dXJuIHZlcmlmaWVkLnBheWxvYWQgYXMgeyB1c2VySWQ6IHN0cmluZyB9XHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb24oKTogUHJvbWlzZTx7IHVzZXJJZDogc3RyaW5nIH0gfCBudWxsPiB7XHJcbiAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKClcclxuICBjb25zdCB0b2tlbiA9IGNvb2tpZVN0b3JlLmdldCgndG9rZW4nKT8udmFsdWVcclxuXHJcbiAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcclxuXHJcbiAgcmV0dXJuIHZlcmlmeVRva2VuKHRva2VuKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0QXV0aENvb2tpZSh0b2tlbjogc3RyaW5nKSB7XHJcbiAgY29va2llcygpLnNldCgndG9rZW4nLCB0b2tlbiwge1xyXG4gICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICBzYW1lU2l0ZTogJ2xheCcsXHJcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsIC8vIDcgZGF5c1xyXG4gICAgcGF0aDogJy8nLFxyXG4gIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbGVhckF1dGhDb29raWUoKSB7XHJcbiAgY29va2llcygpLmRlbGV0ZSgndG9rZW4nKVxyXG59XHJcbiJdLCJuYW1lcyI6WyJTaWduSldUIiwiand0VmVyaWZ5IiwiY29va2llcyIsImJjcnlwdCIsInNlY3JldCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImNvbXBhcmUiLCJjcmVhdGVUb2tlbiIsInVzZXJJZCIsInNldFByb3RlY3RlZEhlYWRlciIsImFsZyIsInNldEV4cGlyYXRpb25UaW1lIiwic2lnbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJ2ZXJpZmllZCIsInBheWxvYWQiLCJnZXRTZXNzaW9uIiwiY29va2llU3RvcmUiLCJnZXQiLCJ2YWx1ZSIsInNldEF1dGhDb29raWUiLCJzZXQiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwibWF4QWdlIiwicGF0aCIsImNsZWFyQXV0aENvb2tpZSIsImRlbGV0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addTask: () => (/* binding */ addTask),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteTask: () => (/* binding */ deleteTask),\n/* harmony export */   getAllUsers: () => (/* binding */ getAllUsers),\n/* harmony export */   getTasks: () => (/* binding */ getTasks),\n/* harmony export */   getUser: () => (/* binding */ getUser),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   updateTask: () => (/* binding */ updateTask)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _history__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./history */ \"(rsc)/./lib/history.ts\");\n\n\n\n// Use /tmp on Vercel (serverless), or local path for development\nconst isVercel = process.env.VERCEL === \"1\";\nconst DB_PATH = isVercel ? \"/tmp/tasks.json\" : process.env.DATABASE_PATH || \"./data/tasks.json\";\nlet dbCache = global.__db;\nfunction getInitialDb() {\n    return {\n        version: \"3.0.0\",\n        users: [],\n        tasks: {},\n        metadata: {\n            nextId: {},\n            lastModified: new Date().toISOString()\n        }\n    };\n}\nasync function ensureDbExists() {\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().access(DB_PATH);\n    } catch  {\n        const dir = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(DB_PATH);\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().mkdir(dir, {\n            recursive: true\n        });\n        const initialDb = getInitialDb();\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(DB_PATH, JSON.stringify(initialDb, null, 2));\n    }\n}\nasync function readDb() {\n    // Return cached version if available\n    if (dbCache) return dbCache;\n    try {\n        await ensureDbExists();\n        const data = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(DB_PATH, \"utf-8\");\n        const db = JSON.parse(data);\n        dbCache = db;\n        global.__db = db;\n        return db;\n    } catch (error) {\n        // If file operations fail (e.g., on Vercel), use in-memory database\n        console.warn(\"File system unavailable, using in-memory database\");\n        if (!dbCache) {\n            const db = getInitialDb();\n            dbCache = db;\n            global.__db = db;\n            return db;\n        }\n        return dbCache;\n    }\n}\nasync function writeDb(db) {\n    db.metadata.lastModified = new Date().toISOString();\n    dbCache = db;\n    global.__db = db;\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(DB_PATH, JSON.stringify(db, null, 2));\n    } catch (error) {\n        // On Vercel, file writes may fail but we keep the in-memory version\n        console.warn(\"Could not write to file system, data stored in memory only\");\n    }\n}\nasync function getUser(email) {\n    const db = await readDb();\n    return db.users.find((u)=>u.email === email) || null;\n}\nasync function getUserById(userId) {\n    const db = await readDb();\n    return db.users.find((u)=>u.id === userId) || null;\n}\nasync function getAllUsers() {\n    const db = await readDb();\n    return db.users;\n}\nasync function createUser(user) {\n    const db = await readDb();\n    db.users.push(user);\n    await writeDb(db);\n    // Log signup action\n    await (0,_history__WEBPACK_IMPORTED_MODULE_2__.logAction)(\"user_signup\", user.id, undefined, {\n        email: user.email,\n        createdAt: user.createdAt\n    });\n}\nasync function getTasks(userId) {\n    const db = await readDb();\n    return db.tasks[userId] || [];\n}\nasync function addTask(userId, task) {\n    const db = await readDb();\n    if (!db.tasks[userId]) {\n        db.tasks[userId] = [];\n        db.metadata.nextId[userId] = 1;\n    }\n    const id = db.metadata.nextId[userId];\n    db.metadata.nextId[userId]++;\n    const newTask = {\n        ...task,\n        id\n    };\n    db.tasks[userId].push(newTask);\n    await writeDb(db);\n    // Log todo creation\n    await (0,_history__WEBPACK_IMPORTED_MODULE_2__.logAction)(\"todo_created\", userId, newTask.id, {\n        description: newTask.description,\n        priority: newTask.priority,\n        tags: newTask.tags\n    });\n    return newTask;\n}\nasync function updateTask(userId, taskId, updates) {\n    const db = await readDb();\n    const tasks = db.tasks[userId] || [];\n    const taskIndex = tasks.findIndex((t)=>t.id === taskId);\n    if (taskIndex === -1) return null;\n    const oldTask = tasks[taskIndex];\n    const updatedTask = {\n        ...oldTask,\n        ...updates,\n        id: taskId\n    };\n    db.tasks[userId][taskIndex] = updatedTask;\n    await writeDb(db);\n    // Log the appropriate action\n    if (updates.completed !== undefined) {\n        if (updates.completed && !oldTask.completed) {\n            await (0,_history__WEBPACK_IMPORTED_MODULE_2__.logAction)(\"todo_completed\", userId, taskId, {\n                description: updatedTask.description\n            });\n        } else if (!updates.completed && oldTask.completed) {\n            await (0,_history__WEBPACK_IMPORTED_MODULE_2__.logAction)(\"todo_uncompleted\", userId, taskId, {\n                description: updatedTask.description\n            });\n        }\n    } else {\n        await (0,_history__WEBPACK_IMPORTED_MODULE_2__.logAction)(\"todo_updated\", userId, taskId, {\n            updates,\n            description: updatedTask.description\n        });\n    }\n    return updatedTask;\n}\nasync function deleteTask(userId, taskId) {\n    const db = await readDb();\n    const tasks = db.tasks[userId] || [];\n    const taskIndex = tasks.findIndex((t)=>t.id === taskId);\n    if (taskIndex === -1) return false;\n    const deletedTask = tasks[taskIndex];\n    db.tasks[userId].splice(taskIndex, 1);\n    await writeDb(db);\n    // Log deletion\n    await (0,_history__WEBPACK_IMPORTED_MODULE_2__.logAction)(\"todo_deleted\", userId, taskId, {\n        description: deletedTask.description\n    });\n    return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUWdCLFFBQVE7UUFDOUNKLGFBQWFhLFlBQVliLFdBQVc7SUFDdEM7SUFFQSxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb29raWUtdG9kby8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcy9wcm9taXNlcydcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcclxuaW1wb3J0IHsgVGFzaywgVXNlciB9IGZyb20gJ0AvdHlwZXMnXHJcbmltcG9ydCB7IGxvZ0FjdGlvbiB9IGZyb20gJy4vaGlzdG9yeSdcclxuXHJcbi8vIFVzZSAvdG1wIG9uIFZlcmNlbCAoc2VydmVybGVzcyksIG9yIGxvY2FsIHBhdGggZm9yIGRldmVsb3BtZW50XHJcbmNvbnN0IGlzVmVyY2VsID0gcHJvY2Vzcy5lbnYuVkVSQ0VMID09PSAnMSdcclxuY29uc3QgREJfUEFUSCA9IGlzVmVyY2VsXHJcbiAgPyAnL3RtcC90YXNrcy5qc29uJ1xyXG4gIDogKHByb2Nlc3MuZW52LkRBVEFCQVNFX1BBVEggfHwgJy4vZGF0YS90YXNrcy5qc29uJylcclxuXHJcbmludGVyZmFjZSBEYXRhYmFzZSB7XHJcbiAgdmVyc2lvbjogc3RyaW5nXHJcbiAgdXNlcnM6IFVzZXJbXVxyXG4gIHRhc2tzOiBSZWNvcmQ8c3RyaW5nLCBUYXNrW10+XHJcbiAgbWV0YWRhdGE6IHtcclxuICAgIG5leHRJZDogUmVjb3JkPHN0cmluZywgbnVtYmVyPlxyXG4gICAgbGFzdE1vZGlmaWVkOiBzdHJpbmdcclxuICB9XHJcbn1cclxuXHJcbi8vIEdsb2JhbCBpbi1tZW1vcnkgZGF0YWJhc2UgZm9yIHNlcnZlcmxlc3MgZW52aXJvbm1lbnRzXHJcbi8vIFRoaXMgcGVyc2lzdHMgYWNyb3NzIHdhcm0gbGFtYmRhIGludm9jYXRpb25zXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICB2YXIgX19kYjogRGF0YWJhc2UgfCB1bmRlZmluZWRcclxufVxyXG5cclxubGV0IGRiQ2FjaGU6IERhdGFiYXNlIHwgdW5kZWZpbmVkID0gZ2xvYmFsLl9fZGJcclxuXHJcbmZ1bmN0aW9uIGdldEluaXRpYWxEYigpOiBEYXRhYmFzZSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHZlcnNpb246ICczLjAuMCcsXHJcbiAgICB1c2VyczogW10sXHJcbiAgICB0YXNrczoge30sXHJcbiAgICBtZXRhZGF0YToge1xyXG4gICAgICBuZXh0SWQ6IHt9LFxyXG4gICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH0sXHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVEYkV4aXN0cygpIHtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZnMuYWNjZXNzKERCX1BBVEgpXHJcbiAgfSBjYXRjaCB7XHJcbiAgICBjb25zdCBkaXIgPSBwYXRoLmRpcm5hbWUoREJfUEFUSClcclxuICAgIGF3YWl0IGZzLm1rZGlyKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcclxuICAgIGNvbnN0IGluaXRpYWxEYiA9IGdldEluaXRpYWxEYigpXHJcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoREJfUEFUSCwgSlNPTi5zdHJpbmdpZnkoaW5pdGlhbERiLCBudWxsLCAyKSlcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYWREYigpOiBQcm9taXNlPERhdGFiYXNlPiB7XHJcbiAgLy8gUmV0dXJuIGNhY2hlZCB2ZXJzaW9uIGlmIGF2YWlsYWJsZVxyXG4gIGlmIChkYkNhY2hlKSByZXR1cm4gZGJDYWNoZVxyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgZW5zdXJlRGJFeGlzdHMoKVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZzLnJlYWRGaWxlKERCX1BBVEgsICd1dGYtOCcpXHJcbiAgICBjb25zdCBkYjogRGF0YWJhc2UgPSBKU09OLnBhcnNlKGRhdGEpXHJcbiAgICBkYkNhY2hlID0gZGJcclxuICAgIGdsb2JhbC5fX2RiID0gZGJcclxuICAgIHJldHVybiBkYlxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAvLyBJZiBmaWxlIG9wZXJhdGlvbnMgZmFpbCAoZS5nLiwgb24gVmVyY2VsKSwgdXNlIGluLW1lbW9yeSBkYXRhYmFzZVxyXG4gICAgY29uc29sZS53YXJuKCdGaWxlIHN5c3RlbSB1bmF2YWlsYWJsZSwgdXNpbmcgaW4tbWVtb3J5IGRhdGFiYXNlJylcclxuICAgIGlmICghZGJDYWNoZSkge1xyXG4gICAgICBjb25zdCBkYiA9IGdldEluaXRpYWxEYigpXHJcbiAgICAgIGRiQ2FjaGUgPSBkYlxyXG4gICAgICBnbG9iYWwuX19kYiA9IGRiXHJcbiAgICAgIHJldHVybiBkYlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiQ2FjaGVcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlRGIoZGI6IERhdGFiYXNlKSB7XHJcbiAgZGIubWV0YWRhdGEubGFzdE1vZGlmaWVkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgZGJDYWNoZSA9IGRiXHJcbiAgZ2xvYmFsLl9fZGIgPSBkYlxyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKERCX1BBVEgsIEpTT04uc3RyaW5naWZ5KGRiLCBudWxsLCAyKSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgLy8gT24gVmVyY2VsLCBmaWxlIHdyaXRlcyBtYXkgZmFpbCBidXQgd2Uga2VlcCB0aGUgaW4tbWVtb3J5IHZlcnNpb25cclxuICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IHdyaXRlIHRvIGZpbGUgc3lzdGVtLCBkYXRhIHN0b3JlZCBpbiBtZW1vcnkgb25seScpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlcihlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICByZXR1cm4gZGIudXNlcnMuZmluZCh1ID0+IHUuZW1haWwgPT09IGVtYWlsKSB8fCBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlJZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgcmV0dXJuIGRiLnVzZXJzLmZpbmQodSA9PiB1LmlkID09PSB1c2VySWQpIHx8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJzKCk6IFByb21pc2U8VXNlcltdPiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIHJldHVybiBkYi51c2Vyc1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcih1c2VyOiBVc2VyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc3QgZGIgPSBhd2FpdCByZWFkRGIoKVxyXG4gIGRiLnVzZXJzLnB1c2godXNlcilcclxuICBhd2FpdCB3cml0ZURiKGRiKVxyXG5cclxuICAvLyBMb2cgc2lnbnVwIGFjdGlvblxyXG4gIGF3YWl0IGxvZ0FjdGlvbigndXNlcl9zaWdudXAnLCB1c2VyLmlkLCB1bmRlZmluZWQsIHtcclxuICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgY3JlYXRlZEF0OiB1c2VyLmNyZWF0ZWRBdCxcclxuICB9KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGFza3ModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFRhc2tbXT4ge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICByZXR1cm4gZGIudGFza3NbdXNlcklkXSB8fCBbXVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkVGFzayh1c2VySWQ6IHN0cmluZywgdGFzazogT21pdDxUYXNrLCAnaWQnPik6IFByb21pc2U8VGFzaz4ge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuXHJcbiAgaWYgKCFkYi50YXNrc1t1c2VySWRdKSB7XHJcbiAgICBkYi50YXNrc1t1c2VySWRdID0gW11cclxuICAgIGRiLm1ldGFkYXRhLm5leHRJZFt1c2VySWRdID0gMVxyXG4gIH1cclxuXHJcbiAgY29uc3QgaWQgPSBkYi5tZXRhZGF0YS5uZXh0SWRbdXNlcklkXVxyXG4gIGRiLm1ldGFkYXRhLm5leHRJZFt1c2VySWRdKytcclxuXHJcbiAgY29uc3QgbmV3VGFzazogVGFzayA9IHsgLi4udGFzaywgaWQgfVxyXG4gIGRiLnRhc2tzW3VzZXJJZF0ucHVzaChuZXdUYXNrKVxyXG5cclxuICBhd2FpdCB3cml0ZURiKGRiKVxyXG5cclxuICAvLyBMb2cgdG9kbyBjcmVhdGlvblxyXG4gIGF3YWl0IGxvZ0FjdGlvbigndG9kb19jcmVhdGVkJywgdXNlcklkLCBuZXdUYXNrLmlkLCB7XHJcbiAgICBkZXNjcmlwdGlvbjogbmV3VGFzay5kZXNjcmlwdGlvbixcclxuICAgIHByaW9yaXR5OiBuZXdUYXNrLnByaW9yaXR5LFxyXG4gICAgdGFnczogbmV3VGFzay50YWdzLFxyXG4gIH0pXHJcblxyXG4gIHJldHVybiBuZXdUYXNrXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVUYXNrKHVzZXJJZDogc3RyaW5nLCB0YXNrSWQ6IG51bWJlciwgdXBkYXRlczogUGFydGlhbDxUYXNrPik6IFByb21pc2U8VGFzayB8IG51bGw+IHtcclxuICBjb25zdCBkYiA9IGF3YWl0IHJlYWREYigpXHJcbiAgY29uc3QgdGFza3MgPSBkYi50YXNrc1t1c2VySWRdIHx8IFtdXHJcbiAgY29uc3QgdGFza0luZGV4ID0gdGFza3MuZmluZEluZGV4KHQgPT4gdC5pZCA9PT0gdGFza0lkKVxyXG5cclxuICBpZiAodGFza0luZGV4ID09PSAtMSkgcmV0dXJuIG51bGxcclxuXHJcbiAgY29uc3Qgb2xkVGFzayA9IHRhc2tzW3Rhc2tJbmRleF1cclxuICBjb25zdCB1cGRhdGVkVGFzayA9IHsgLi4ub2xkVGFzaywgLi4udXBkYXRlcywgaWQ6IHRhc2tJZCB9XHJcbiAgZGIudGFza3NbdXNlcklkXVt0YXNrSW5kZXhdID0gdXBkYXRlZFRhc2tcclxuXHJcbiAgYXdhaXQgd3JpdGVEYihkYilcclxuXHJcbiAgLy8gTG9nIHRoZSBhcHByb3ByaWF0ZSBhY3Rpb25cclxuICBpZiAodXBkYXRlcy5jb21wbGV0ZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKHVwZGF0ZXMuY29tcGxldGVkICYmICFvbGRUYXNrLmNvbXBsZXRlZCkge1xyXG4gICAgICBhd2FpdCBsb2dBY3Rpb24oJ3RvZG9fY29tcGxldGVkJywgdXNlcklkLCB0YXNrSWQsIHtcclxuICAgICAgICBkZXNjcmlwdGlvbjogdXBkYXRlZFRhc2suZGVzY3JpcHRpb24sXHJcbiAgICAgIH0pXHJcbiAgICB9IGVsc2UgaWYgKCF1cGRhdGVzLmNvbXBsZXRlZCAmJiBvbGRUYXNrLmNvbXBsZXRlZCkge1xyXG4gICAgICBhd2FpdCBsb2dBY3Rpb24oJ3RvZG9fdW5jb21wbGV0ZWQnLCB1c2VySWQsIHRhc2tJZCwge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uOiB1cGRhdGVkVGFzay5kZXNjcmlwdGlvbixcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgYXdhaXQgbG9nQWN0aW9uKCd0b2RvX3VwZGF0ZWQnLCB1c2VySWQsIHRhc2tJZCwge1xyXG4gICAgICB1cGRhdGVzLFxyXG4gICAgICBkZXNjcmlwdGlvbjogdXBkYXRlZFRhc2suZGVzY3JpcHRpb24sXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHVwZGF0ZWRUYXNrXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVUYXNrKHVzZXJJZDogc3RyaW5nLCB0YXNrSWQ6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIGNvbnN0IGRiID0gYXdhaXQgcmVhZERiKClcclxuICBjb25zdCB0YXNrcyA9IGRiLnRhc2tzW3VzZXJJZF0gfHwgW11cclxuICBjb25zdCB0YXNrSW5kZXggPSB0YXNrcy5maW5kSW5kZXgodCA9PiB0LmlkID09PSB0YXNrSWQpXHJcblxyXG4gIGlmICh0YXNrSW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2VcclxuXHJcbiAgY29uc3QgZGVsZXRlZFRhc2sgPSB0YXNrc1t0YXNrSW5kZXhdXHJcbiAgZGIudGFza3NbdXNlcklkXS5zcGxpY2UodGFza0luZGV4LCAxKVxyXG4gIGF3YWl0IHdyaXRlRGIoZGIpXHJcblxyXG4gIC8vIExvZyBkZWxldGlvblxyXG4gIGF3YWl0IGxvZ0FjdGlvbigndG9kb19kZWxldGVkJywgdXNlcklkLCB0YXNrSWQsIHtcclxuICAgIGRlc2NyaXB0aW9uOiBkZWxldGVkVGFzay5kZXNjcmlwdGlvbixcclxuICB9KVxyXG5cclxuICByZXR1cm4gdHJ1ZVxyXG59XHJcbiJdLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJsb2dBY3Rpb24iLCJpc1ZlcmNlbCIsInByb2Nlc3MiLCJlbnYiLCJWRVJDRUwiLCJEQl9QQVRIIiwiREFUQUJBU0VfUEFUSCIsImRiQ2FjaGUiLCJnbG9iYWwiLCJfX2RiIiwiZ2V0SW5pdGlhbERiIiwidmVyc2lvbiIsInVzZXJzIiwidGFza3MiLCJtZXRhZGF0YSIsIm5leHRJZCIsImxhc3RNb2RpZmllZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVuc3VyZURiRXhpc3RzIiwiYWNjZXNzIiwiZGlyIiwiZGlybmFtZSIsIm1rZGlyIiwicmVjdXJzaXZlIiwiaW5pdGlhbERiIiwid3JpdGVGaWxlIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlYWREYiIsImRhdGEiLCJyZWFkRmlsZSIsImRiIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwid3JpdGVEYiIsImdldFVzZXIiLCJlbWFpbCIsImZpbmQiLCJ1IiwiZ2V0VXNlckJ5SWQiLCJ1c2VySWQiLCJpZCIsImdldEFsbFVzZXJzIiwiY3JlYXRlVXNlciIsInVzZXIiLCJwdXNoIiwidW5kZWZpbmVkIiwiY3JlYXRlZEF0IiwiZ2V0VGFza3MiLCJhZGRUYXNrIiwidGFzayIsIm5ld1Rhc2siLCJkZXNjcmlwdGlvbiIsInByaW9yaXR5IiwidGFncyIsInVwZGF0ZVRhc2siLCJ0YXNrSWQiLCJ1cGRhdGVzIiwidGFza0luZGV4IiwiZmluZEluZGV4IiwidCIsIm9sZFRhc2siLCJ1cGRhdGVkVGFzayIsImNvbXBsZXRlZCIsImRlbGV0ZVRhc2siLCJkZWxldGVkVGFzayIsInNwbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/history.ts":
/*!************************!*\
  !*** ./lib/history.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllHistory: () => (/* binding */ getAllHistory),\n/* harmony export */   getLoginHistory: () => (/* binding */ getLoginHistory),\n/* harmony export */   getTodoHistory: () => (/* binding */ getTodoHistory),\n/* harmony export */   getUserHistory: () => (/* binding */ getUserHistory),\n/* harmony export */   logAction: () => (/* binding */ logAction)\n/* harmony export */ });\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Use /tmp on Vercel (serverless), or local path for development\nconst isVercel = process.env.VERCEL === \"1\";\nconst HISTORY_DIR = isVercel ? \"/tmp/history\" : process.env.HISTORY_PATH || \"./history\";\nlet historyCache = global.__history || {};\nasync function ensureHistoryDirExists() {\n    try {\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().access(HISTORY_DIR);\n    } catch  {\n        try {\n            await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().mkdir(HISTORY_DIR, {\n                recursive: true\n            });\n        } catch  {\n        // Ignore errors on serverless\n        }\n    }\n}\nasync function readHistoryFile(filename) {\n    // Return from cache if available\n    if (historyCache[filename]) {\n        return historyCache[filename];\n    }\n    try {\n        await ensureHistoryDirExists();\n        const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(HISTORY_DIR, filename);\n        const data = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(filePath, \"utf-8\");\n        const entries = JSON.parse(data);\n        historyCache[filename] = entries;\n        global.__history = historyCache;\n        return entries;\n    } catch  {\n        historyCache[filename] = [];\n        global.__history = historyCache;\n        return [];\n    }\n}\nasync function writeHistoryFile(filename, entries) {\n    historyCache[filename] = entries;\n    global.__history = historyCache;\n    try {\n        await ensureHistoryDirExists();\n        const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(HISTORY_DIR, filename);\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(filePath, JSON.stringify(entries, null, 2));\n    } catch  {\n    // Ignore file write errors on serverless\n    }\n}\nfunction generateId() {\n    return `${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n}\nasync function logAction(actionType, userId, todoId, metadata) {\n    const entry = {\n        id: generateId(),\n        timestamp: new Date().toISOString(),\n        userId,\n        actionType,\n        todoId,\n        metadata\n    };\n    // Write to central history files (backward compatibility)\n    let filename;\n    if (actionType === \"user_signup\" || actionType === \"user_login\" || actionType === \"user_logout\") {\n        filename = \"login-history.json\";\n    } else {\n        filename = \"todo-history.json\";\n    }\n    const entries = await readHistoryFile(filename);\n    entries.push(entry);\n    await writeHistoryFile(filename, entries);\n    // Also write to per-user history file for comprehensive tracking\n    await logUserAction(userId, entry);\n    return entry;\n}\n// Log to per-user history file\nasync function logUserAction(userId, entry) {\n    try {\n        const userHistoryDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(HISTORY_DIR, \"users\");\n        try {\n            await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().access(userHistoryDir);\n        } catch  {\n            await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().mkdir(userHistoryDir, {\n                recursive: true\n            });\n        }\n        const userFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(userHistoryDir, `${userId}.json`);\n        let userEntries = [];\n        try {\n            const data = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(userFilePath, \"utf-8\");\n            userEntries = JSON.parse(data);\n        } catch  {\n        // File doesn't exist yet, start with empty array\n        }\n        userEntries.push(entry);\n        await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().writeFile(userFilePath, JSON.stringify(userEntries, null, 2));\n    } catch  {\n    // Ignore file system errors on serverless\n    }\n}\nasync function getLoginHistory(userId) {\n    const entries = await readHistoryFile(\"login-history.json\");\n    if (userId) {\n        return entries.filter((e)=>e.userId === userId);\n    }\n    return entries;\n}\nasync function getTodoHistory(userId, todoId) {\n    const entries = await readHistoryFile(\"todo-history.json\");\n    let filtered = entries;\n    if (userId) {\n        filtered = filtered.filter((e)=>e.userId === userId);\n    }\n    if (todoId !== undefined) {\n        filtered = filtered.filter((e)=>e.todoId === todoId);\n    }\n    return filtered;\n}\nasync function getAllHistory(userId) {\n    const loginHistory = await getLoginHistory(userId);\n    const todoHistory = await getTodoHistory(userId);\n    const combined = [\n        ...loginHistory,\n        ...todoHistory\n    ];\n    // Sort by timestamp descending (most recent first)\n    return combined.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n}\n// Get user-specific history from per-user file\nasync function getUserHistory(userId) {\n    const userHistoryDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(HISTORY_DIR, \"users\");\n    const userFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(userHistoryDir, `${userId}.json`);\n    try {\n        const data = await fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(userFilePath, \"utf-8\");\n        const entries = JSON.parse(data);\n        return entries.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n    } catch  {\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvaGlzdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNEI7QUFDTDtBQUV2QixpRUFBaUU7QUFDakUsTUFBTUUsV0FBV0MsUUFBUUMsR0FBRyxDQUFDQyxNQUFNLEtBQUs7QUFDeEMsTUFBTUMsY0FBY0osV0FDaEIsaUJBQ0NDLFFBQVFDLEdBQUcsQ0FBQ0csWUFBWSxJQUFJO0FBMEJqQyxJQUFJQyxlQUErQ0MsT0FBT0MsU0FBUyxJQUFJLENBQUM7QUFFeEUsZUFBZUM7SUFDYixJQUFJO1FBQ0YsTUFBTVgseURBQVMsQ0FBQ007SUFDbEIsRUFBRSxPQUFNO1FBQ04sSUFBSTtZQUNGLE1BQU1OLHdEQUFRLENBQUNNLGFBQWE7Z0JBQUVRLFdBQVc7WUFBSztRQUNoRCxFQUFFLE9BQU07UUFDTiw4QkFBOEI7UUFDaEM7SUFDRjtBQUNGO0FBRUEsZUFBZUMsZ0JBQWdCQyxRQUFnQjtJQUM3QyxpQ0FBaUM7SUFDakMsSUFBSVIsWUFBWSxDQUFDUSxTQUFTLEVBQUU7UUFDMUIsT0FBT1IsWUFBWSxDQUFDUSxTQUFTO0lBQy9CO0lBRUEsSUFBSTtRQUNGLE1BQU1MO1FBQ04sTUFBTU0sV0FBV2hCLGdEQUFTLENBQUNLLGFBQWFVO1FBQ3hDLE1BQU1HLE9BQU8sTUFBTW5CLDJEQUFXLENBQUNpQixVQUFVO1FBQ3pDLE1BQU1JLFVBQVVDLEtBQUtDLEtBQUssQ0FBQ0o7UUFDM0JYLFlBQVksQ0FBQ1EsU0FBUyxHQUFHSztRQUN6QlosT0FBT0MsU0FBUyxHQUFHRjtRQUNuQixPQUFPYTtJQUNULEVBQUUsT0FBTTtRQUNOYixZQUFZLENBQUNRLFNBQVMsR0FBRyxFQUFFO1FBQzNCUCxPQUFPQyxTQUFTLEdBQUdGO1FBQ25CLE9BQU8sRUFBRTtJQUNYO0FBQ0Y7QUFFQSxlQUFlZ0IsaUJBQWlCUixRQUFnQixFQUFFSyxPQUF1QjtJQUN2RWIsWUFBWSxDQUFDUSxTQUFTLEdBQUdLO0lBQ3pCWixPQUFPQyxTQUFTLEdBQUdGO0lBRW5CLElBQUk7UUFDRixNQUFNRztRQUNOLE1BQU1NLFdBQVdoQixnREFBUyxDQUFDSyxhQUFhVTtRQUN4QyxNQUFNaEIsNERBQVksQ0FBQ2lCLFVBQVVLLEtBQUtJLFNBQVMsQ0FBQ0wsU0FBUyxNQUFNO0lBQzdELEVBQUUsT0FBTTtJQUNOLHlDQUF5QztJQUMzQztBQUNGO0FBRUEsU0FBU007SUFDUCxPQUFPLENBQUMsRUFBRUMsS0FBS0MsR0FBRyxHQUFHLENBQUMsRUFBRUMsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQ3RFO0FBRU8sZUFBZUMsVUFDcEJDLFVBQXNCLEVBQ3RCQyxNQUFjLEVBQ2RDLE1BQWUsRUFDZkMsUUFBOEI7SUFFOUIsTUFBTUMsUUFBc0I7UUFDMUJDLElBQUliO1FBQ0pjLFdBQVcsSUFBSWIsT0FBT2MsV0FBVztRQUNqQ047UUFDQUQ7UUFDQUU7UUFDQUM7SUFDRjtJQUVBLDBEQUEwRDtJQUMxRCxJQUFJdEI7SUFDSixJQUFJbUIsZUFBZSxpQkFBaUJBLGVBQWUsZ0JBQWdCQSxlQUFlLGVBQWU7UUFDL0ZuQixXQUFXO0lBQ2IsT0FBTztRQUNMQSxXQUFXO0lBQ2I7SUFFQSxNQUFNSyxVQUFVLE1BQU1OLGdCQUFnQkM7SUFDdENLLFFBQVFzQixJQUFJLENBQUNKO0lBQ2IsTUFBTWYsaUJBQWlCUixVQUFVSztJQUVqQyxpRUFBaUU7SUFDakUsTUFBTXVCLGNBQWNSLFFBQVFHO0lBRTVCLE9BQU9BO0FBQ1Q7QUFFQSwrQkFBK0I7QUFDL0IsZUFBZUssY0FBY1IsTUFBYyxFQUFFRyxLQUFtQjtJQUM5RCxJQUFJO1FBQ0YsTUFBTU0saUJBQWlCNUMsZ0RBQVMsQ0FBQ0ssYUFBYTtRQUU5QyxJQUFJO1lBQ0YsTUFBTU4seURBQVMsQ0FBQzZDO1FBQ2xCLEVBQUUsT0FBTTtZQUNOLE1BQU03Qyx3REFBUSxDQUFDNkMsZ0JBQWdCO2dCQUFFL0IsV0FBVztZQUFLO1FBQ25EO1FBRUEsTUFBTWdDLGVBQWU3QyxnREFBUyxDQUFDNEMsZ0JBQWdCLENBQUMsRUFBRVQsT0FBTyxLQUFLLENBQUM7UUFFL0QsSUFBSVcsY0FBOEIsRUFBRTtRQUNwQyxJQUFJO1lBQ0YsTUFBTTVCLE9BQU8sTUFBTW5CLDJEQUFXLENBQUM4QyxjQUFjO1lBQzdDQyxjQUFjekIsS0FBS0MsS0FBSyxDQUFDSjtRQUMzQixFQUFFLE9BQU07UUFDTixpREFBaUQ7UUFDbkQ7UUFFQTRCLFlBQVlKLElBQUksQ0FBQ0o7UUFDakIsTUFBTXZDLDREQUFZLENBQUM4QyxjQUFjeEIsS0FBS0ksU0FBUyxDQUFDcUIsYUFBYSxNQUFNO0lBQ3JFLEVBQUUsT0FBTTtJQUNOLDBDQUEwQztJQUM1QztBQUNGO0FBRU8sZUFBZUMsZ0JBQWdCWixNQUFlO0lBQ25ELE1BQU1mLFVBQVUsTUFBTU4sZ0JBQWdCO0lBRXRDLElBQUlxQixRQUFRO1FBQ1YsT0FBT2YsUUFBUTRCLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRWQsTUFBTSxLQUFLQTtJQUMxQztJQUVBLE9BQU9mO0FBQ1Q7QUFFTyxlQUFlOEIsZUFBZWYsTUFBZSxFQUFFQyxNQUFlO0lBQ25FLE1BQU1oQixVQUFVLE1BQU1OLGdCQUFnQjtJQUV0QyxJQUFJcUMsV0FBVy9CO0lBRWYsSUFBSWUsUUFBUTtRQUNWZ0IsV0FBV0EsU0FBU0gsTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFZCxNQUFNLEtBQUtBO0lBQy9DO0lBRUEsSUFBSUMsV0FBV2dCLFdBQVc7UUFDeEJELFdBQVdBLFNBQVNILE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRWIsTUFBTSxLQUFLQTtJQUMvQztJQUVBLE9BQU9lO0FBQ1Q7QUFFTyxlQUFlRSxjQUFjbEIsTUFBZTtJQUNqRCxNQUFNbUIsZUFBZSxNQUFNUCxnQkFBZ0JaO0lBQzNDLE1BQU1vQixjQUFjLE1BQU1MLGVBQWVmO0lBRXpDLE1BQU1xQixXQUFXO1dBQUlGO1dBQWlCQztLQUFZO0lBRWxELG1EQUFtRDtJQUNuRCxPQUFPQyxTQUFTQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFDdkIsSUFBSWhDLEtBQUtnQyxFQUFFbkIsU0FBUyxFQUFFb0IsT0FBTyxLQUFLLElBQUlqQyxLQUFLK0IsRUFBRWxCLFNBQVMsRUFBRW9CLE9BQU87QUFFbkU7QUFFQSwrQ0FBK0M7QUFDeEMsZUFBZUMsZUFBZTFCLE1BQWM7SUFDakQsTUFBTVMsaUJBQWlCNUMsZ0RBQVMsQ0FBQ0ssYUFBYTtJQUM5QyxNQUFNd0MsZUFBZTdDLGdEQUFTLENBQUM0QyxnQkFBZ0IsQ0FBQyxFQUFFVCxPQUFPLEtBQUssQ0FBQztJQUUvRCxJQUFJO1FBQ0YsTUFBTWpCLE9BQU8sTUFBTW5CLDJEQUFXLENBQUM4QyxjQUFjO1FBQzdDLE1BQU16QixVQUFVQyxLQUFLQyxLQUFLLENBQUNKO1FBQzNCLE9BQU9FLFFBQVFxQyxJQUFJLENBQUMsQ0FBQ0MsR0FBaUJDLElBQ3BDLElBQUloQyxLQUFLZ0MsRUFBRW5CLFNBQVMsRUFBRW9CLE9BQU8sS0FBSyxJQUFJakMsS0FBSytCLEVBQUVsQixTQUFTLEVBQUVvQixPQUFPO0lBRW5FLEVBQUUsT0FBTTtRQUNOLE9BQU8sRUFBRTtJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb29raWUtdG9kby8uL2xpYi9oaXN0b3J5LnRzP2E4M2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzL3Byb21pc2VzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5cclxuLy8gVXNlIC90bXAgb24gVmVyY2VsIChzZXJ2ZXJsZXNzKSwgb3IgbG9jYWwgcGF0aCBmb3IgZGV2ZWxvcG1lbnRcclxuY29uc3QgaXNWZXJjZWwgPSBwcm9jZXNzLmVudi5WRVJDRUwgPT09ICcxJ1xyXG5jb25zdCBISVNUT1JZX0RJUiA9IGlzVmVyY2VsXHJcbiAgPyAnL3RtcC9oaXN0b3J5J1xyXG4gIDogKHByb2Nlc3MuZW52LkhJU1RPUllfUEFUSCB8fCAnLi9oaXN0b3J5JylcclxuXHJcbmV4cG9ydCB0eXBlIEFjdGlvblR5cGUgPVxyXG4gIHwgJ3VzZXJfc2lnbnVwJ1xyXG4gIHwgJ3VzZXJfbG9naW4nXHJcbiAgfCAndXNlcl9sb2dvdXQnXHJcbiAgfCAndG9kb19jcmVhdGVkJ1xyXG4gIHwgJ3RvZG9fdXBkYXRlZCdcclxuICB8ICd0b2RvX2NvbXBsZXRlZCdcclxuICB8ICd0b2RvX3VuY29tcGxldGVkJ1xyXG4gIHwgJ3RvZG9fZGVsZXRlZCdcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSGlzdG9yeUVudHJ5IHtcclxuICBpZDogc3RyaW5nXHJcbiAgdGltZXN0YW1wOiBzdHJpbmdcclxuICB1c2VySWQ6IHN0cmluZ1xyXG4gIGFjdGlvblR5cGU6IEFjdGlvblR5cGVcclxuICB0b2RvSWQ/OiBudW1iZXJcclxuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cclxufVxyXG5cclxuLy8gR2xvYmFsIGluLW1lbW9yeSBoaXN0b3J5IGZvciBzZXJ2ZXJsZXNzIGVudmlyb25tZW50c1xyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgdmFyIF9faGlzdG9yeTogUmVjb3JkPHN0cmluZywgSGlzdG9yeUVudHJ5W10+IHwgdW5kZWZpbmVkXHJcbn1cclxuXHJcbmxldCBoaXN0b3J5Q2FjaGU6IFJlY29yZDxzdHJpbmcsIEhpc3RvcnlFbnRyeVtdPiA9IGdsb2JhbC5fX2hpc3RvcnkgfHwge31cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUhpc3RvcnlEaXJFeGlzdHMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGZzLmFjY2VzcyhISVNUT1JZX0RJUilcclxuICB9IGNhdGNoIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGZzLm1rZGlyKEhJU1RPUllfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIC8vIElnbm9yZSBlcnJvcnMgb24gc2VydmVybGVzc1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcmVhZEhpc3RvcnlGaWxlKGZpbGVuYW1lOiBzdHJpbmcpOiBQcm9taXNlPEhpc3RvcnlFbnRyeVtdPiB7XHJcbiAgLy8gUmV0dXJuIGZyb20gY2FjaGUgaWYgYXZhaWxhYmxlXHJcbiAgaWYgKGhpc3RvcnlDYWNoZVtmaWxlbmFtZV0pIHtcclxuICAgIHJldHVybiBoaXN0b3J5Q2FjaGVbZmlsZW5hbWVdXHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgZW5zdXJlSGlzdG9yeURpckV4aXN0cygpXHJcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihISVNUT1JZX0RJUiwgZmlsZW5hbWUpXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgsICd1dGYtOCcpXHJcbiAgICBjb25zdCBlbnRyaWVzID0gSlNPTi5wYXJzZShkYXRhKVxyXG4gICAgaGlzdG9yeUNhY2hlW2ZpbGVuYW1lXSA9IGVudHJpZXNcclxuICAgIGdsb2JhbC5fX2hpc3RvcnkgPSBoaXN0b3J5Q2FjaGVcclxuICAgIHJldHVybiBlbnRyaWVzXHJcbiAgfSBjYXRjaCB7XHJcbiAgICBoaXN0b3J5Q2FjaGVbZmlsZW5hbWVdID0gW11cclxuICAgIGdsb2JhbC5fX2hpc3RvcnkgPSBoaXN0b3J5Q2FjaGVcclxuICAgIHJldHVybiBbXVxyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIaXN0b3J5RmlsZShmaWxlbmFtZTogc3RyaW5nLCBlbnRyaWVzOiBIaXN0b3J5RW50cnlbXSkge1xyXG4gIGhpc3RvcnlDYWNoZVtmaWxlbmFtZV0gPSBlbnRyaWVzXHJcbiAgZ2xvYmFsLl9faGlzdG9yeSA9IGhpc3RvcnlDYWNoZVxyXG5cclxuICB0cnkge1xyXG4gICAgYXdhaXQgZW5zdXJlSGlzdG9yeURpckV4aXN0cygpXHJcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihISVNUT1JZX0RJUiwgZmlsZW5hbWUpXHJcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGVudHJpZXMsIG51bGwsIDIpKVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgLy8gSWdub3JlIGZpbGUgd3JpdGUgZXJyb3JzIG9uIHNlcnZlcmxlc3NcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcclxuICByZXR1cm4gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOSl9YFxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nQWN0aW9uKFxyXG4gIGFjdGlvblR5cGU6IEFjdGlvblR5cGUsXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgdG9kb0lkPzogbnVtYmVyLFxyXG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PlxyXG4pIHtcclxuICBjb25zdCBlbnRyeTogSGlzdG9yeUVudHJ5ID0ge1xyXG4gICAgaWQ6IGdlbmVyYXRlSWQoKSxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgdXNlcklkLFxyXG4gICAgYWN0aW9uVHlwZSxcclxuICAgIHRvZG9JZCxcclxuICAgIG1ldGFkYXRhLFxyXG4gIH1cclxuXHJcbiAgLy8gV3JpdGUgdG8gY2VudHJhbCBoaXN0b3J5IGZpbGVzIChiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxyXG4gIGxldCBmaWxlbmFtZTogc3RyaW5nXHJcbiAgaWYgKGFjdGlvblR5cGUgPT09ICd1c2VyX3NpZ251cCcgfHwgYWN0aW9uVHlwZSA9PT0gJ3VzZXJfbG9naW4nIHx8IGFjdGlvblR5cGUgPT09ICd1c2VyX2xvZ291dCcpIHtcclxuICAgIGZpbGVuYW1lID0gJ2xvZ2luLWhpc3RvcnkuanNvbidcclxuICB9IGVsc2Uge1xyXG4gICAgZmlsZW5hbWUgPSAndG9kby1oaXN0b3J5Lmpzb24nXHJcbiAgfVxyXG5cclxuICBjb25zdCBlbnRyaWVzID0gYXdhaXQgcmVhZEhpc3RvcnlGaWxlKGZpbGVuYW1lKVxyXG4gIGVudHJpZXMucHVzaChlbnRyeSlcclxuICBhd2FpdCB3cml0ZUhpc3RvcnlGaWxlKGZpbGVuYW1lLCBlbnRyaWVzKVxyXG5cclxuICAvLyBBbHNvIHdyaXRlIHRvIHBlci11c2VyIGhpc3RvcnkgZmlsZSBmb3IgY29tcHJlaGVuc2l2ZSB0cmFja2luZ1xyXG4gIGF3YWl0IGxvZ1VzZXJBY3Rpb24odXNlcklkLCBlbnRyeSlcclxuXHJcbiAgcmV0dXJuIGVudHJ5XHJcbn1cclxuXHJcbi8vIExvZyB0byBwZXItdXNlciBoaXN0b3J5IGZpbGVcclxuYXN5bmMgZnVuY3Rpb24gbG9nVXNlckFjdGlvbih1c2VySWQ6IHN0cmluZywgZW50cnk6IEhpc3RvcnlFbnRyeSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1c2VySGlzdG9yeURpciA9IHBhdGguam9pbihISVNUT1JZX0RJUiwgJ3VzZXJzJylcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBmcy5hY2Nlc3ModXNlckhpc3RvcnlEaXIpXHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgYXdhaXQgZnMubWtkaXIodXNlckhpc3RvcnlEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlckZpbGVQYXRoID0gcGF0aC5qb2luKHVzZXJIaXN0b3J5RGlyLCBgJHt1c2VySWR9Lmpzb25gKVxyXG5cclxuICAgIGxldCB1c2VyRW50cmllczogSGlzdG9yeUVudHJ5W10gPSBbXVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZzLnJlYWRGaWxlKHVzZXJGaWxlUGF0aCwgJ3V0Zi04JylcclxuICAgICAgdXNlckVudHJpZXMgPSBKU09OLnBhcnNlKGRhdGEpXHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgLy8gRmlsZSBkb2Vzbid0IGV4aXN0IHlldCwgc3RhcnQgd2l0aCBlbXB0eSBhcnJheVxyXG4gICAgfVxyXG5cclxuICAgIHVzZXJFbnRyaWVzLnB1c2goZW50cnkpXHJcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUodXNlckZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeSh1c2VyRW50cmllcywgbnVsbCwgMikpXHJcbiAgfSBjYXRjaCB7XHJcbiAgICAvLyBJZ25vcmUgZmlsZSBzeXN0ZW0gZXJyb3JzIG9uIHNlcnZlcmxlc3NcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMb2dpbkhpc3RvcnkodXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxIaXN0b3J5RW50cnlbXT4ge1xyXG4gIGNvbnN0IGVudHJpZXMgPSBhd2FpdCByZWFkSGlzdG9yeUZpbGUoJ2xvZ2luLWhpc3RvcnkuanNvbicpXHJcblxyXG4gIGlmICh1c2VySWQpIHtcclxuICAgIHJldHVybiBlbnRyaWVzLmZpbHRlcihlID0+IGUudXNlcklkID09PSB1c2VySWQpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gZW50cmllc1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG9kb0hpc3RvcnkodXNlcklkPzogc3RyaW5nLCB0b2RvSWQ/OiBudW1iZXIpOiBQcm9taXNlPEhpc3RvcnlFbnRyeVtdPiB7XHJcbiAgY29uc3QgZW50cmllcyA9IGF3YWl0IHJlYWRIaXN0b3J5RmlsZSgndG9kby1oaXN0b3J5Lmpzb24nKVxyXG5cclxuICBsZXQgZmlsdGVyZWQgPSBlbnRyaWVzXHJcblxyXG4gIGlmICh1c2VySWQpIHtcclxuICAgIGZpbHRlcmVkID0gZmlsdGVyZWQuZmlsdGVyKGUgPT4gZS51c2VySWQgPT09IHVzZXJJZClcclxuICB9XHJcblxyXG4gIGlmICh0b2RvSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIoZSA9PiBlLnRvZG9JZCA9PT0gdG9kb0lkKVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZpbHRlcmVkXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxIaXN0b3J5KHVzZXJJZD86IHN0cmluZyk6IFByb21pc2U8SGlzdG9yeUVudHJ5W10+IHtcclxuICBjb25zdCBsb2dpbkhpc3RvcnkgPSBhd2FpdCBnZXRMb2dpbkhpc3RvcnkodXNlcklkKVxyXG4gIGNvbnN0IHRvZG9IaXN0b3J5ID0gYXdhaXQgZ2V0VG9kb0hpc3RvcnkodXNlcklkKVxyXG5cclxuICBjb25zdCBjb21iaW5lZCA9IFsuLi5sb2dpbkhpc3RvcnksIC4uLnRvZG9IaXN0b3J5XVxyXG5cclxuICAvLyBTb3J0IGJ5IHRpbWVzdGFtcCBkZXNjZW5kaW5nIChtb3N0IHJlY2VudCBmaXJzdClcclxuICByZXR1cm4gY29tYmluZWQuc29ydCgoYSwgYikgPT5cclxuICAgIG5ldyBEYXRlKGIudGltZXN0YW1wKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLnRpbWVzdGFtcCkuZ2V0VGltZSgpXHJcbiAgKVxyXG59XHJcblxyXG4vLyBHZXQgdXNlci1zcGVjaWZpYyBoaXN0b3J5IGZyb20gcGVyLXVzZXIgZmlsZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckhpc3RvcnkodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEhpc3RvcnlFbnRyeVtdPiB7XHJcbiAgY29uc3QgdXNlckhpc3RvcnlEaXIgPSBwYXRoLmpvaW4oSElTVE9SWV9ESVIsICd1c2VycycpXHJcbiAgY29uc3QgdXNlckZpbGVQYXRoID0gcGF0aC5qb2luKHVzZXJIaXN0b3J5RGlyLCBgJHt1c2VySWR9Lmpzb25gKVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGZzLnJlYWRGaWxlKHVzZXJGaWxlUGF0aCwgJ3V0Zi04JylcclxuICAgIGNvbnN0IGVudHJpZXMgPSBKU09OLnBhcnNlKGRhdGEpXHJcbiAgICByZXR1cm4gZW50cmllcy5zb3J0KChhOiBIaXN0b3J5RW50cnksIGI6IEhpc3RvcnlFbnRyeSkgPT5cclxuICAgICAgbmV3IERhdGUoYi50aW1lc3RhbXApLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudGltZXN0YW1wKS5nZXRUaW1lKClcclxuICAgIClcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBbXVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiaXNWZXJjZWwiLCJwcm9jZXNzIiwiZW52IiwiVkVSQ0VMIiwiSElTVE9SWV9ESVIiLCJISVNUT1JZX1BBVEgiLCJoaXN0b3J5Q2FjaGUiLCJnbG9iYWwiLCJfX2hpc3RvcnkiLCJlbnN1cmVIaXN0b3J5RGlyRXhpc3RzIiwiYWNjZXNzIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJyZWFkSGlzdG9yeUZpbGUiLCJmaWxlbmFtZSIsImZpbGVQYXRoIiwiam9pbiIsImRhdGEiLCJyZWFkRmlsZSIsImVudHJpZXMiLCJKU09OIiwicGFyc2UiLCJ3cml0ZUhpc3RvcnlGaWxlIiwid3JpdGVGaWxlIiwic3RyaW5naWZ5IiwiZ2VuZXJhdGVJZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJsb2dBY3Rpb24iLCJhY3Rpb25UeXBlIiwidXNlcklkIiwidG9kb0lkIiwibWV0YWRhdGEiLCJlbnRyeSIsImlkIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJwdXNoIiwibG9nVXNlckFjdGlvbiIsInVzZXJIaXN0b3J5RGlyIiwidXNlckZpbGVQYXRoIiwidXNlckVudHJpZXMiLCJnZXRMb2dpbkhpc3RvcnkiLCJmaWx0ZXIiLCJlIiwiZ2V0VG9kb0hpc3RvcnkiLCJmaWx0ZXJlZCIsInVuZGVmaW5lZCIsImdldEFsbEhpc3RvcnkiLCJsb2dpbkhpc3RvcnkiLCJ0b2RvSGlzdG9yeSIsImNvbWJpbmVkIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsImdldFVzZXJIaXN0b3J5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/history.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/bcryptjs","vendor-chunks/jose"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftodos%2Froute&page=%2Fapi%2Ftodos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftodos%2Froute.ts&appDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cpc%5Cpookie-todo-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();